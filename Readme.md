# My Sky App

A personal AI interface acting as a simplified "Second Brain" frontend. It serves two main purposes:
1.  **Recording Interface (`index.html`)**: Quickly capture audio notes and thoughts.
2.  **Smart Feed (`feed.html`)**: Consumes AI-generated content from both local files and private Nostr messages.
3.  **YouTube Feed**: Local, vector-based recommendations generated from your notes.

## Features

### ğŸ™ï¸ Audio Recorder (`index.html`)
- One-tap audio recording.
- Saves audio files locally (or prepares them for upload).
- Simple, distraction-free interface.

### ğŸ“± Smart Feed (`feed.html`)
- **Hybrid Data Source**:
    - **Local JSON Feeds**: Reads static JSON files generated by local AI agents from the `./feed/` directory.
    - **Nostr AI Insights**: Fetches private, encrypted insights (Kind 10001, NIP-44) from a specific Personal AI Bot.
- **Interactions**:
    - **Like**: Saves the post content to your "Second Brain" (Google Drive) via webhook.
    - **Reply**: Sends a text reply/comment to your "Second Brain" (Google Drive).
- **Authentication**: Uses NIP-07 (Nostr browser extension) to decrypt private AI insights and secure interactions.

### â–¶ï¸ YouTube Feed
- **Local Vectors**: Generates a TFâ€‘IDF vector space from your notes directory.
- **YouTube Search**: Uses those vectors to query YouTube and filter results by similarity.
- **Local JSON Output**: Saves results to `feed/youtube_feed.json` for the UI.

## Architecture

```
â”œâ”€â”€ index.html              # Audio Recorder Interface
â”œâ”€â”€ feed.html               # Feed Interface (Main UI)
â”œâ”€â”€ start_server.sh         # Local server script
â”œâ”€â”€ feed/                   # Local feed data directory
â”‚   â”œâ”€â”€ AI_Curator_feed.json
â”‚   â””â”€â”€ *_feed.json
â”‚   â”œâ”€â”€ notes_vectors.json
â”‚   â””â”€â”€ youtube_feed.json
â””â”€â”€ utilities/
    â””â”€â”€ my_sky_app.gs       # Google Apps Script for backend handling
    â””â”€â”€ vectorize_notes.js  # Builds TFâ€‘IDF vectors from notes
    â””â”€â”€ build_youtube_feed.js # Fetches YouTube videos based on vectors
```

## Setup

### 1. Prerequisites
- **Nostr Extension**: Install a browser extension like [nos2x](https://github.com/fiatjaf/nos2x) or [Alby](https://getalby.com/) to handle keys and decryption.
- **Python**: Required to run the local server (or any other static file server).

### 2. Running Locally
Web browsers block fetching local files (`file://`) due to CORS. You must run a local server.

```bash
# Make executable (first time only)
chmod +x start_server.sh

# Run server
./start_server.sh
```
Visit `http://localhost:8000/feed.html` to view the feed.

### YouTube Feed Setup
1. Generate vectors from your notes:
   `node utilities/vectorize_notes.js --source "/path/to/notes"`
2. Fetch YouTube recommendations (requires API key):
   `YOUTUBE_API_KEY=... node utilities/build_youtube_feed.js`

### 3. Backend (Google Apps Script)
To enable "Likes" and "Replies" saving to Google Drive:
1.  Deploy the code in `utilities/my_sky_app.gs` as a **Web App** on Google Apps Script.
2.  Set `Who has access` to **Anyone**.
3.  Update the `GOOGLE_SCRIPT_URL` in `feed.html` and `index.html` with your deployment URL.

## Interaction Flow
1.  **Login**: Click "Login with Nostr" in the top right. This grants the app access to your public key and ability to decrypt messages.
2.  **View**: The app automatically fetches local JSONs and queries Nostr relays for messages from your Bot.
3.  **Action**: 
    - Clicking **Like** sends the post payload to the Google Script.
    - The Google Script saves it as a Markdown file in your specified Google Drive folder.
